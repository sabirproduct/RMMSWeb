<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Entry Form</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
    <link rel="stylesheet" href="styles.css"> <!-- Optional: Link to external CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"> <!-- Bootstrap Icons -->
</head>
<body class="container">
    <form action="/submit-customer" method="POST" class="needs-validation" novalidate>
        <div class="mb-3">
            <label for="customerName" class="form-label">Name:</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-person"></i></span>
                <input type="text" id="customerName" name="customerName" class="form-control" required placeholder="Enter Customer Name" autocomplete="off" oninput="this.value = this.value.replace(/\b\w/g, char => char.toUpperCase()).replace(/\B\w/g, char => char.toLowerCase());">
            </div>
        </div>

        <div class="mb-3">
            <label for="address" class="form-label">Address:</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-house"></i></span>
                <textarea id="address" name="address" class="form-control" rows="3" required placeholder="Enter address" autocomplete="off" oninput="this.value = this.value.replace(/\b\w/g, char => char.toUpperCase()).replace(/\B\w/g, char => char.toLowerCase());"></textarea>
            </div>
        </div>
        <div class="mb-3">
            <label for="state" class="form-label">State:</label>
            <div class="input-group">
            <span class="input-group-text"><i class="bi bi-geo-alt"></i></span>
            <select id="state" name="state" class="form-select" required onchange="updateGstStateCode()">
                <option value="" disabled>Select State</option>
                <option value="AP_37">Andhra Pradesh (37)</option>
                <option value="AR_12">Arunachal Pradesh (12)</option>
                <option value="AS_18">Assam (18)</option>
                <option value="BR_10">Bihar (10)</option>
                <option value="CG_22">Chhattisgarh (22)</option>
                <option value="GA_30">Goa (30)</option>
                <option value="GJ_24">Gujarat (24)</option>
                <option value="HR_06">Haryana (06)</option>
                <option value="HP_02">Himachal Pradesh (02)</option>
                <option value="JH_20">Jharkhand (20)</option>
                <option value="KA_29">Karnataka (29)</option>
                <option value="KL_32">Kerala (32)</option>
                <option value="MP_23">Madhya Pradesh (23)</option>
                <option value="MH_27">Maharashtra (27)</option>
                <option value="MN_14">Manipur (14)</option>
                <option value="ML_17">Meghalaya (17)</option>
                <option value="MZ_15">Mizoram (15)</option>
                <option value="NL_13">Nagaland (13)</option>
                <option value="OD_21">Odisha (21)</option>
                <option value="PB_03">Punjab (03)</option>
                <option value="RJ_08">Rajasthan (08)</option>
                <option value="SK_11">Sikkim (11)</option>
                <option value="TN_33">Tamil Nadu (33)</option>
                <option value="TS_36">Telangana (36)</option>
                <option value="TR_16">Tripura (16)</option>
                <option value="UP_09">Uttar Pradesh (09)</option>
                <option value="UK_05">Uttarakhand (05)</option>
                <option value="WB_19" selected>West Bengal (19)</option>
                <option value="AN_35">Andaman and Nicobar Islands (35)</option>
                <option value="CH_04">Chandigarh (04)</option>
                <option value="DN_26">Dadra and Nagar Haveli and Daman and Diu (26)</option>
                <option value="DL_07">Delhi (07)</option>
                <option value="JK_01">Jammu and Kashmir (01)</option>
                <option value="LA_38">Ladakh (38)</option>
                <option value="LD_31">Lakshadweep (31)</option>
                <option value="PY_34">Puducherry (34)</option>
            </select>
            </div>
        </div>
        </div>
        <div class="mb-3">
            <label for="mobile1" class="form-label">Mobile 1:</label>
            <div class="input-group">
            <span class="input-group-text"><i class="bi bi-telephone"></i></span>
            <input type="tel" id="mobile1" name="mobile1" class="form-control" required placeholder="Enter primary mobile number" pattern="[0-9]{10}" title="Please enter a valid 10-digit number" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10);">
            </div>
            <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="isWhatsapp" name="isWhatsapp">
            <label class="form-check-label" for="isWhatsapp">Is this a WhatsApp number?</label>
            </div>
        </div>

        <div class="mb-3">
            <label for="mobile2" class="form-label">Mobile 2:</label>
            <div class="input-group">
            <span class="input-group-text"><i class="bi bi-telephone"></i></span>
            <input type="tel" id="mobile2" name="mobile2" class="form-control" placeholder="Enter secondary mobile number" pattern="[0-9]{10}" title="Please enter a valid 10-digit number" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10);">
            </div>
            <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="isWhatsapp2" name="isWhatsapp2">
            <label class="form-check-label" for="isWhatsapp2">Is this a WhatsApp number?</label>
            </div>
        </div></div>

        <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                <input type="email" id="email" name="email" class="form-control" placeholder="Enter email address" autocomplete="off" oninput="this.value = this.value.toLowerCase();" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title="Please enter a valid email address">
            </div>
        </div>

        <div class="mb-3">
            <label for="gstin" class="form-label">GSTIN:</label>
            <div class="input-group">
            <span class="input-group-text"><i class="bi bi-file-earmark-text"></i></span>
            <input type="text" id="gstin" name="gstin" class="form-control" required placeholder="Enter GSTIN in the format: 22AAAAA0000A1Z5 or 0 for non-GST customer" autocomplete="off" pattern="^(0|[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1})$" title="Please enter a valid GSTIN in the format: 22AAAAA0000A1Z5 or 0 for non-GST customer">
            </div>
        </div>

        <button type="submit" class="btn btn-primary" onclick="prepareAndSubmit(event)">Submit</button>
        <script>
            function prepareAndSubmit(event) {
            event.preventDefault();
            const form = document.querySelector('.needs-validation');
            if (!form.checkValidity()) {
                event.stopPropagation();
                alert('Please fill out all required fields correctly.');
                form.classList.add('was-validated');
                return;
            }

            const formData = new FormData(form);
            const jsonObject = {};
            formData.forEach((value, key) => {
                jsonObject[key] = value;
            });

            //Post the data to the server
            const userData = { name: "John Doe", email: "john.doe@example.com" };
            var id = parent.Post2Server(userData,'users');
            alert(id);
            }
        </script>
    </form>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</body>
</html>